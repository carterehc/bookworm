<% provide(:title, "#{@user.username} | My Books")%>
<%= render 'layouts/home_nav' %>
<!--<style>
th {
    cursor: pointer;
}

tr:nth-child(even){
    background-color: #000;
}

</style>-->



<%if @user.books.any?%>
        <h2><%= "#{@user.username}'s " %>Books (<%= @user.books.count %>)</h2>
            <!--<div class="table-responsive">-->
                <table id = "books_table" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                        <tr>
                            <th><%= sort_link "title" %></th>
                            <th scope = "col"><%= sort_link "author_first", "Author First" %></th>
                            <th scope = "col"><%= sort_link "author_last", "Author Last" %></th>
                            <th scope = "col"><%= sort_link "yr_published", "Published" %></th>
                            <th scope = "col"><%= sort_link "want_read", "Read" %></th>
                            <th scope = "col"><%= sort_link "yr_read", "Year Read" %></th>
                            <th scope = "col"><%= sort_link "times_read", "Times Read" %></th>
                            <th scope = "col"><%= sort_link "own" %></th>
                            <th scope="col"><%= sort_link "ISBN", "ISBN" %></th>
                            <th scope = "col"><%= sort_link "tag" %></th>
                            <th scope = "col">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% @books.each do |book|%>
                            <tr>
                            <!--<th scope="row">-->
                            <td class = "left"><%= book.title %></td>
                            <td class = "left"><%= "#{book.author_first}"%></td>
                            <td class = "left"><%= "#{book.author_last}"%></td>
                            <td><%= book.yr_published %></td>
                            <td><% if book.read?%>
                                    <%= "Read" %>    <!--if book is not read, assumed want to read-->
                                    <%else%>
                                    <%= "Want to read"%>
                            <%end%></td>
                            <td><% if book.yr_read?%>
                                <%= book.yr_read%>
                            <%else%>
                                <%= "----" %>
                            <%end%>
                            </td>
                            <td><%if book.times_read?%>
                                    <%= book.times_read%>
                            <%else%>
                                <%= "----" %>
                            <%end%></td>
                            <td><% if book.own? %>
                                <%= "Own" %>
                            <%else%>
                                <% if book.want_own?%>
                                    <%= "Want to own" %>
                                <%else%>
                                    <%= "Do not own"%>
                                <%end%>
                            <%end%></td>
                            <td><%=book.ISBN%></td>
                            <td><%= book.tag%></td>
                            <td><%= link_to "Edit", edit_book_path(book.id) %>   |   <%= link_to "Delete", book_path(book.id), method: :delete %></td>
                            </tr>
                        <% end%>
                    </tbody>
                </table>
            <!--</div>-->
            
    <%else%>
        <h2><%= "#{@user.username} has #{@user.books.count} books. Add a book." %></h2>
    <%end%>

<!--<script>
function sortTable(n){
    var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
    table = document.getElementById("books_table");
    switching = true;
    //set sorting direction to ascending
    dir = "asc";
    
    while(switching){
        switching = false;
        rows = table.getElementsByTagName("TR");
        
        for (i = 1; i < (rows.length - 1); i++){
            shouldSwitch = false;
        
            x = rows[i].getElementsByTagName("TD")[n];
            y = rows[i + 1].getElementsByTagName("TD")[n];
        
            if (dir == "asc"){
                if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()){
                    shouldSwitch = true;
                    break;
                }
            } else if (dir == "desc"){
                if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()){
                    shouldSwitch = true;
                    break;
                }
            }
        
        }
        if (shouldSwitch){
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
            switchcount ++;
        } else {
            if(switchcount == 0 && dir == "asc"){
                dir = "desc";
                switching = true;
            }
        }
    }
}
</script>-->