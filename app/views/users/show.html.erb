<% provide(:title, "#{@user.username} | My Books")%>
<%= render 'layouts/home_nav' %>
<script>
  $(document).ready(function() {
    $('.books_table').dataTable();
  } );
</script>
<%if @user.books.any?%>
        <h2><%= "#{@user.username}'s " %>Books (<%= @user.books.count %>)</h2>
            <div class="table-responsive">
                <table id = "books_table" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                        <tr>
                            <th scope = "col">Title</th>
                            <th scope = "col">Author</th>
                            <th scope = "col">Published</th>
                            <th scope = "col">Read</th>
                            <th scope = "col">Year Read</th>
                            <th scope = "col">Times Read</th>
                            <th scope = "col">Own</th>
                            <th scope="col">ISBN</th>
                            <th scope = "col">Tag</th>
                            <th scope = "col">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% @books.each do |book|%>
                            <tr>
                            <!--<th scope="row">-->
                            <td class = "left"><%= book.title %></td>
                            <td class = "left"><%= "#{book.author_first} #{book.author_last}" %></td>
                            <td><%= book.yr_published %></td>
                            <td><% if book.want_read? %>
                                <%= "Want to read" %>
                            <% else %>
                                <% if book.read?%>
                                    <%= "Read" %>    <!--if book is not read, assumed want to read-->
                                    <%else%>
                                    <%= "Want to read"%>
                                    <%end%>
                            <%end%></td>
                            <td><% if book.yr_read?%>
                                <%= book.yr_read%>
                            <%else%>
                                <%= "----" %>
                            <%end%>
                            </td>
                            <td><%if book.times_read?%>
                                    <%= book.times_read%>
                            <%else%>
                                <%= "----" %>
                            <%end%></td>
                            <td><% if book.own? %>
                                <%= "Own" %>
                            <%else%>
                                <% if book.want_own?%>
                                    <%= "Want to own" %>
                                <%else%>
                                    <%= "Do not own"%>
                                <%end%>
                            <%end%></td>
                            <td><%=book.ISBN%></td>
                            <td><%= book.tag%></td>
                            <td><%= link_to "Edit", edit_book_path(book.id) %>   |   <%= link_to "Delete", book_path(book.id), method: :delete %></td>
            <!--</th>-->
                            </tr>
                        <% end%>
                    </tbody>
                </table>
            </div>
        <%= will_paginate @books %>
            
    <%else%>
        <h2><%= "#{@user.username} has no books. Add a " %>Books (<%= @user.books.count %>)</h2>
    <%end%>
